############
# VARIABLES
############
@localBase = http://localhost:8080
# @localBase = http://localhost:3000

@renderBase = https://cse341-002-web-services-m6u1.onrender.com

# Cambia esta variable según quieras probar local o render
@base = {{renderBase}}
# @base = {{localBase}}

# Id por defecto (se sobreescribe cuando hagas POST con @name + script)
@contactId = 000000000000000000000000

### Headers comunes
@json = application/json


#########################
# GET all
#########################
GET {{base}}/contacts

#########################
# POST create (guarda id automáticamente)
#########################
# @name createContact
POST {{base}}/contacts
Content-Type: {{json}}

{
  "firstName": "Ana",
  "lastName": "Lopez",
  "email": "ana@example.com",
  "favoriteColor": "blue",
  "birthday": "1992-05-12"
}

> {%
// Guarda el id devuelto para los siguientes requests
const body = JSON.parse(response.body);
if (body && body.id) {
  client.global.set("contactId", body.id);
  console.log("Saved contactId:", body.id);
} else {
  console.log("No id found in response");
}
%}

#########################
# GET by id (usa el id guardado)
#########################
GET {{base}}/contacts/{{contactId}}

#########################
# PUT replace (todos los campos)
#########################
PUT {{base}}/contacts/{{contactId}}
Content-Type: {{json}}

{
  "firstName": "Ana Maria",
  "lastName": "Lopez",
  "email": "ana@example.com",
  "favoriteColor": "green",
  "birthday": "1992-05-12"
}

#########################
# DELETE
#########################
DELETE {{base}}/contacts/{{contactId}}


#########################
# SWAGGER (opcional)
#########################
GET {{base}}/api-docs
